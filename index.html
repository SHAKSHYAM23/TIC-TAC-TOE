<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <title>TIC TAC TOE</title>
</head>


<body>
    <nav>
        <ul>
            <li>My Tic Tac Toe</li>
        </ul>
    </nav>


    <!-- ****************************************************************************************************** -->
    <div class="container">

        <div class="container2">
            <h2>Welcome...  </h2>
            <!-- ******************* -->
            <div >
                <span class="turn">Turn forX</span>
                
            </div>
            <!-- ************************** -->
            <div >
                <img id="wingif" width="150px" src="excited.gif" alt="">
            </div>
            <!-- ********************************* -->
             <div class="butt" ><button id="buttons" ><h1> Play Again</h1></button></div>
        </div>
 <!-- **********************************************************-->
        <div class="container1">
            <div class="line" id="line"></div>
            <div class="box bt-0 bl-0" > <span class="boxtext"></span></div>
            <div class="box bt-0 "><span class="boxtext"></span></div>
            <div class="box bt-0 br-0"><span class="boxtext"></span></div>
            <div class="box bl-0"><span class="boxtext"></span></div> 
            <div class="box"><span class="boxtext"></span></div>
            <div class="box br-0"><span class="boxtext"></span></div>
            <div class="box bl-0 bb-0"><span class="boxtext"></span></div>
            <div class="box bb-0"><span class="boxtext"></span></div>
            <div class="box bb-0 br-0"><span class="boxtext"></span></div>
            <div class="but" ><button id="butto" ><h1> Reset</h1></button></div>
        </div>
  </div>

</body>

<script>
    console.log('gbgg')
    let music=new Audio("music.mp3")
    // music.play()
    let musicturn=new Audio("ting.mp3")
    let gameover=new Audio("gameover.mp3")
    let turn="X"
    let victory = false
    let playagain=document.getElementById("buttons")
    let reset=document.getElementById("butto")
    const turnchange = ()=>{
        // return turn==='X' ? "0" : "X"
        if (turn==='X') {
            return '0'
        } else {
            return 'X'
        }
    }

    const checkwin=()=>{
        let boxtext=document.getElementsByClassName("boxtext")
            let wins=[
               [0,1,2,2.5,5,0] ,
               [3,4,5,2.5,15,0] ,
               [6,7,8,2.5,25,0] ,
               [0,3,6,-7.5,15.5,90] ,
               [1,4,7,2.5,15.5,90] ,
               [2,5,8,12.5,15.5,90] ,
               [0,4,8,3.5,15.5,45] ,
               [2,4,6,3.5,14,135] ,
            ]
            wins.forEach(e=>{
                
            if((boxtext[e[0]].innerText===boxtext[e[1]].innerText)&&(boxtext[e[0]].innerText===boxtext[e[2]].innerText)&&(boxtext[e[0]].innerText!=="")){
                document.querySelector('.turn').innerText="Congratulation "+ boxtext[e[0]].innerText +" WON!!!";
                victory = true;
               gameover.play();
          document.getElementById("wingif").style.width="200px"
          document.getElementById("buttons").style.display="inline"
      reset.style.display="none"
      document.querySelector("#line").style.width="25vw"
        // document.getElementById("line").style.width="25vw"
document.querySelector("#line").style.transform=`translate(${e[3]}vw,${e[4]}vw) rotate(${e[5]}deg)`;
        
         
            }
            })
    }
   
    Array.from(document.getElementsByClassName("box")).forEach((element)=>{
    let boxtext=element.querySelector(".boxtext")
    element.addEventListener('click',(e)=>{
        if(boxtext.innerText===''){
            boxtext.innerText=turn
           
           turn= turnchange()
           
            musicturn.play();
            checkwin();
            if(!victory){
                document.querySelector(".turn").innerText="Turn for " + turn
                }
           
        }
    })
    }
           
    )
 
    playagain.addEventListener('click',(e)=>{
        document.getElementById("wingif").style.width="0px"
        document.getElementById("buttons").style.display="none" 
        turn="X"
        document.querySelector('.turn').innerText="Turn for " + turn;
        victory = false;
        // Array.from(document.getElementsByClassName("box")).forEach((element)=>{
        //     let boxtext=element.querySelector(".boxtext")
        //     boxtext.innerText=""
        // }) ******************************************** APPROACH1
        let boxtext=document.getElementsByClassName("boxtext")

for (let index = 0; index < 9; index++) {
   boxtext[index].innerText=""
}
// }*******************************************************APPROACH2



            reset.style.display="inline"
          document.querySelector("#line").style.width="0vw"
    })
   reset.addEventListener('click',(e)=>{
        document.getElementById("wingif").style.width="0px"
        document.getElementById("buttons").style.display="none" 
        turn="X"
        document.querySelector('.turn').innerText="Turn for " + turn;
        victory = false;
        Array.from(document.getElementsByClassName("box")).forEach((element)=>{
            let boxtext=element.querySelector(".boxtext")
            boxtext.innerText=""
        })
         
       document.querySelector("#line").style.width="0vw"
    })

</script>

</html>

}
